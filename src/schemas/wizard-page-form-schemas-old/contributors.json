{
  "title": "Contributors and related publications - Step 4 of 5",
  "type": "object",
  "properties": {
    "contributors": {
      "type": "array",
      "title": "Dataset contributors",
      "description": "Please list all authors who have contributed to the dataset, in the order you would like them to appear on the data publication. Please note that the list of contributors may be different for this data publication as compared to a journal article based on the data.",
      "minItems": 1, 
      "items": {
        "type": "object",
        "required": ["firstName", "lastName"],

        "properties": {
          "firstName": {
            "type": "string",
            "title": "First name"
          },
          "lastName": {
            "type": "string",
            "title": "Last name"
          },
          "orcid": {
            "type": "string",
            "title": "ORCID"
          },
          "affiliation": {
            "type": "string",
            "title": "Affiliation"
          },
          "emailMissing":{
            "type": "boolean",
            "title": "This author does not have an email address",
            "default": false
          }
        },
        "dependencies":{
          "emailMissing":{
            "oneOf":[
              {
                "required": ["email"],
                "properties":{
                  "email": {
                    "type": "string",
                    "format": "email",
                    "title": "E-mail address"
                  },
                  "emailMissing": {
                    "const": false
                  }
                }
              },
              {
                "properties":{
                  "emailMissing": {
                    "const": true
                  }
                }
              }
            ]
          }
        }
      }
    },
    "otherContributors": {
      "type": "array",
      "title": "Other contributors",
      "description": "Please list all other contributers to this dataset. This could be technicians, data managers, etc.",
      "items": {
        "type": "object",
        "required": ["firstName", "lastName", "contributionType"],

        "properties": {
          "firstName": {
            "type": "string",
            "title": "First name"
          },
          "lastName": {
            "type": "string",
            "title": "Last name"
          },
          "orcid": {
            "type": "string",
            "title": "ORCID"
          },
          "affiliation": {
            "type": "string",
            "title": "Affiliation"
          },
          "contributionType":{
            "type": "string",
            "title": "Contribution type",
            "controlledTerm": "contributionType",
            "examples": [],
            "exampleIDs": []
          },
          "emailMissing":{
            "type": "boolean",
            "title": "This author does not have an email address",
            "default": false
          }
        },
        "dependencies":{
          "emailMissing":{
            "oneOf":[
              {
                "required": ["email"],
                "properties":{
                  "email": {
                    "type": "string",
                    "format": "email",
                    "title": "E-mail address"
                  },
                  "emailMissing": {
                    "const": false
                  }
                }
              },
              {
                "properties":{
                  "emailMissing": {
                    "const": true
                  }
                }
              }
            ]
          }
        }
      }
    },
    "publications": {
      "type": "array",
      "title": "Related publications",
      "description": "Please list all related publications that report on the dataset itself or on analysis based on the data.",
      "items": {
        "type": "object",
        "required": ["pubTitle", "pubURL"],
        "properties": {
          "pubTitle": {
            "type": "string",
            "title": "Title"
          },
          "pubURL": {
            "type": "string",
            "title": "DOI or URL"
          }
        }
      }
    }
  }
}